!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("auth0-sso-util",[],t):"object"==typeof exports?exports["auth0-sso-util"]=t():e["auth0-sso-util"]=t()}(this,function(){return function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t){"use strict";function o(e){var t=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),o=new RegExp("[\\?&]"+t+"=([^&]*)"),n=o.exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function n(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("Illegal base64url string!")}return window.decodeURIComponent(escape(window.atob(t)))}function r(e){var t=e.split(".");if(3!==t.length)throw new Error("JWT must have 3 parts");var o=n(t[1]);if(!o)throw new Error("Cannot decode the token");return JSON.parse(o)}function a(e){var t=r(e);if("undefined"==typeof t.exp)return null;var o=new Date(0);return o.setUTCSeconds(t.exp),o}function i(e){var t=arguments.length<=1||void 0===arguments[1]?0:arguments[1],o=a(e);return null===o?!1:!(o.valueOf()>(new Date).valueOf()+1e3*t)}function c(){document.body.style.display="none"}function l(){document.body.style.display="inline"}function u(e){var t=e.auth0ClientId,n=e.auth0Domain,r=e.defaultHref,a=void 0===r?"/":r,u=e.callbackURL,s=void 0===u?window.location.pathname:u,h=e.scope,v=void 0===h?"openid name email app_metadata user_metadata roles":h,m=e.lockOptions,w=void 0===m?{}:m;c();var g=new Auth0Lock(t,n),y=g.parseHash(window.location.hash);if(y&&y.id_token)return localStorage.setItem(p,'"'+y.id_token+'"'),window.location.href=y.state||a,l(),Promise.resolve();var b=localStorage.getItem(p),k=void 0;try{k=!i(b)}catch(S){k=!1}return b&&k?(l(),Promise.resolve()):new Promise(function(e){g.$auth0.getSSOData(function(t,n){if(!t&&n.sso)g.$auth0.signin({state:window.location.href,callbackURL:s,callbackOnLocationHash:!0,scope:v});else{var r=function(){if("/"!==window.location.pathname)return window.location.href="/?targetUrl="+window.location.href,{v:e()};l();var t={sso:!0,closable:!1,disableSignupAction:!0,authParams:{state:o("targetUrl"),scope:v},callbackURL:s,responseType:"token"};setTimeout(function(){g.show(d({},t,w))},10)}();if("object"===("undefined"==typeof r?"undefined":f(r)))return r.v}})})}function s(e){var t=e.auth0ClientId,o=e.auth0Domain,n=e.checkInterval,r=void 0===n?5e3:n;setInterval(function(){if(localStorage.getItem(p)){var e=new Auth0Lock(t,o);e.$auth0.getSSOData(function(e,t){e||t&&t.sso||(localStorage.removeItem(p),window.location.href="/?targetUrl="+window.location.href)})}},r)}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeToken=r,t.isTokenExpired=i,t.verifyAuth=u,t.turnOnSSOSessionCheck=s;var p="userToken"}])});